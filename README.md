# Payment History Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–µ–π –ø–ª–∞—Ç–µ–∂–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:
- Java 21
- Spring WebFlux (—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Å—Ç–µ–∫)
- R2DBC (—Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ë–î)
- PostgreSQL
- Docker
- Prometheus + Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç


# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
```git clone <repository-url>```  

```cd payment-history-service```
# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
```make setup```

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
```make all```
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ k6
``` make test-full```


## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
### Swagger UI: http://localhost:8080/swagger-ui.html
–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:
1. **Mock Service** - –∑–∞–≥–ª—É—à–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Å–ª—É—á–∞–π–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 200–º—Å
2. **Main Service** - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Docker + Docker Compose (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)  
* curl (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)  
* k6 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## üõ† –ö–æ–º–∞–Ω–¥—ã
* make setup      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
* make all        # –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: —Å–±–æ—Ä–∫–∞ ‚Üí –∑–∞–ø—É—Å–∫ ‚Üí —Ç–µ—Å—Ç
* make build      # –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
* make up         # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
* make test-api   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
* make test-read  # –¢–µ—Å—Ç —á—Ç–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç k6)
* make test-write # –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ (—Ç—Ä–µ–±—É–µ—Ç k6)
* make test-full  # –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç k6)
* make logs       # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
* make clean      # –û—á–∏—Å—Ç–∫–∞


